{% extends '@EkynaCms/base.html.twig' %}

{% block metas -%}
    {{ cms_metas(news) }}
{%- endblock metas %}

{% block content %}
{% apply spaceless %}
<div class="container">
    <div class="row">

        <div class="col-md-8">
            <h1>{{ news.title }}</h1>
            <p>
                <em>{{ news.date|format_date('full') }}</em>
            </p>
            {% if news.media is not null -%}
            <p>
                {{- news.media|media({'autoplay': false}) -}}
            </p>
            {%- endif %}
            <div>
                {{- news.content|raw -}}
            </div>
            <hr>
            {% set link_params = {} %}
            {% set page = app.request.query.get('page') %}
            {% if page > 1 %}
                {% set link_params = {'page': page} %}
            {% endif %}
            <p style="text-align: center">
                <a href="{{ path('ekyna_news_example_index', link_params) }}" class="btn btn-default">Retour</a>
            </p>
        </div>

        <div class="col-md-4">
            {% for n in latest -%}
            <p>
                <a href="{{ path('ekyna_news_example_detail', link_params|merge({'slug': n.slug})) }}" class="h4">{{ n.title }}</a><br>
                <em>{{ n.date|format_date('short') }}</em>
            </p>
            <p>
                {{- n.content|striptags|u.truncate(128, '&hellip;', true)|raw -}}
            </p>
            {%- if not loop.last %}<hr>{% endif -%}
            {%- endfor %}
        </div>

    </div>
</div>
{% endapply %}
{% endblock content %}
